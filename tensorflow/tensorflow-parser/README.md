# TensorFlow Converter

This program takes the JSON Chrome traces as generated by timeline.py
(see INSTRUMENTATION.md for details) and converts them into SnailTrail
msgpack logs.

## Usage

    # converts initivars.json into msgpack
    cargo run -- --output initvars.msgpack initvars.json

Note: There is a operators.json which maps TensorFlow operator names to SnailTrail
messagepack ids. If the converter observes an unknwon operator, it will crash. You
will have add the operator (which a unique id) to the `operators.json`.

Note: `operators.json` is also read by the plotting scripts.

# Caveates

This converter currently is *only* tested for reading in a single timeline
file containing a single device. The instrumentation in the OSS version of
TensorFlow does not report inter-process communication.

Communication edges are inserted based on the inputs of each activity (as annotated
from the dataflow graph). This corresponds to shared-memory read between threads.

While it would technically be possible to merge multiple subsequent jobs ("step"
in TF jargon, i.e. mulitple JSON timelines) into a single SnailTrail message
pack trace, there is not much point in doing this since the resulting PAG would 
be disconnected. Just run SnailTrail on each timeline individually.
